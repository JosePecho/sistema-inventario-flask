<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Producto - Sistema de Inventario</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <h1>Sistema de Inventario</h1>
            </div>
            <nav class="nav">
                {% if current_user.is_authenticated %}
                    <span style="color: white; margin-right: 1rem;">
                        Hola, {{ current_user.nombre }}
                    </span>
                    <a href="{{ url_for('dashboard') }}" class="nav-link">Dashboard</a>
                    <a href="{{ url_for('productos') }}" class="nav-link">Productos</a>
                    <a href="{{ url_for('movimientos') }}" class="nav-link">Movimientos</a>
                    <a href="{{ url_for('consultas') }}" class="nav-link">Consultas</a>
                    <a href="{{ url_for('reportes') }}" class="nav-link">Reportes</a>
                    <a href="{{ url_for('mi_cuenta') }}" class="nav-link">Mi Cuenta</a>
                    <a href="{{ url_for('logout') }}" class="nav-link">Salir</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-link">Login</a>
                {% endif %}
            </nav>
        </header>

        <!-- MENSAJES FLASH -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <main class="main-content">
            <div class="form-container">
                <h2>‚úèÔ∏è Editar Producto</h2>
                
                <form method="POST" class="product-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="codigo">C√≥digo del Producto *</label>
                            <input type="text" id="codigo" name="codigo" required 
                                   value="{{ producto.codigo }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="nombre">Nombre del Producto *</label>
                            <input type="text" id="nombre" name="nombre" required 
                                   value="{{ producto.nombre }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="ubicacion">Ubicaci√≥n</label>
                            <input type="text" id="ubicacion" name="ubicacion" 
                                   placeholder="Ej: Almac√©n A, Oficina 1, Estante 3..."
                                   value="{{ producto.ubicacion or '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="modelo">Modelo</label>
                            <input type="text" id="modelo" name="modelo" 
                                   placeholder="Ej: Pro X, G502, K120"
                                   value="{{ producto.modelo or '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="marca">Marca</label>
                            <input type="text" id="marca" name="marca" 
                                   placeholder="Ej: Logitech, Dell, HP"
                                   value="{{ producto.marca or '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="estado">Estado</label>
                            <select id="estado" name="estado">
                                <option value="">Seleccionar estado</option>
                                <option value="Nuevo" {% if producto.estado == 'Nuevo' %}selected{% endif %}>Nuevo</option>
                                <option value="Usado" {% if producto.estado == 'Usado' %}selected{% endif %}>Usado</option>
                                <option value="Refurbished" {% if producto.estado == 'Refurbished' %}selected{% endif %}>Refurbished</option>
                                <option value="Da√±ado" {% if producto.estado == 'Da√±ado' %}selected{% endif %}>Da√±ado</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="a√±o_adquisicion">A√±o Adquisici√≥n</label>
                            <input type="number" id="a√±o_adquisicion" name="a√±o_adquisicion" 
                                   min="2000" max="2030" 
                                   placeholder="Ej: 2024"
                                   value="{{ producto.a√±o_adquisicion or '' }}">
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="descripcion">Descripci√≥n</label>
                            <textarea id="descripcion" name="descripcion" rows="3"
                                     placeholder="Descripci√≥n del producto...">{{ producto.descripcion or '' }}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="precio_compra">Precio de Compra *</label>
                            <input type="number" id="precio_compra" name="precio_compra" 
                                   step="0.01" min="0" required 
                                   value="{{ producto.precio_compra }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="stock_actual">Stock Actual *</label>
                            <input type="number" id="stock_actual" name="stock_actual" 
                                   min="0" required 
                                   value="{{ producto.stock_actual }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="stock_minimo">Stock M√≠nimo *</label>
                            <input type="number" id="stock_minimo" name="stock_minimo" 
                                   min="0" required 
                                   value="{{ producto.stock_minimo }}">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Actualizar Producto</button>
                        <a href="{{ url_for('productos') }}" class="btn btn-secondary">‚ùå Cancelar</a>
                    </div>
                </form>
            </div>
        </main>

        <footer class="footer">
            <p>¬© 2024 Sistema de Inventario</p>
        </footer>
    </div>
</body>
</html>